(function(){var e,c=function(b,a){return function(){return b.apply(a,arguments)}};window.vtex||(window.vtex={});(e=window.vtex).checkout||(e.checkout={});e=function(){function b(){this._getProfileURL=c(this._getProfileURL,this);this._getPostalCodeURL=c(this._getPostalCodeURL,this);this._getUpdateItemURL=c(this._getUpdateItemURL,this);this._startTransactionURL=c(this._startTransactionURL,this);this._getOrdersURL=c(this._getOrdersURL,this);this._getAddCouponURL=c(this._getAddCouponURL,this);this._getRemoveOfferingsURL=
c(this._getRemoveOfferingsURL,this);this._getAddOfferingsURL=c(this._getAddOfferingsURL,this);this._getSaveAttachmentURL=c(this._getSaveAttachmentURL,this);this._getOrderFormURL=c(this._getOrderFormURL,this);this._getOrderFormIdFromURL=c(this._getOrderFormIdFromURL,this);this._getOrderFormIdFromCookie=c(this._getOrderFormIdFromCookie,this);this._getOrderFormId=c(this._getOrderFormId,this);this.getOrders=c(this.getOrders,this);this.startTransaction=c(this.startTransaction,this);this.getProfileByEmail=
c(this.getProfileByEmail,this);this.getAddressInformation=c(this.getAddressInformation,this);this.calculateShipping=c(this.calculateShipping,this);this.removeGiftRegistry=c(this.removeGiftRegistry,this);this.removeDiscountCoupon=c(this.removeDiscountCoupon,this);this.addDiscountCoupon=c(this.addDiscountCoupon,this);this.removeItems=c(this.removeItems,this);this.updateItems=c(this.updateItems,this);this.removeOffering=c(this.removeOffering,this);this.addOffering=c(this.addOffering,this);this.addOfferingWithInfo=
c(this.addOfferingWithInfo,this);this.sendLocale=c(this.sendLocale,this);this.sendAttachment=c(this.sendAttachment,this);this.getOrderForm=c(this.getOrderForm,this);this.CHECKOUT_ID="checkout";this.HOST_URL=$.url().attr("base");this.HOST_ORDER_FORM_URL=this.HOST_URL+"/api/checkout/pub/orderForm/";this.HOST_CART_URL=this.HOST_URL+"/"+$.url().segment(-2)+"/cart/";this.COOKIE_NAME="checkout.vtex.com";this.COOKIE_ORDER_FORM_ID_KEY="__ofid";this.POSTALCODE_URL=this.HOST_URL+"/api/checkout/pub/postal-code/";
this.GATEWAY_CALLBACK_URL=this.HOST_URL+"/checkout/gatewayCallback/{0}/{1}/{2}";this.requestingItem=void 0;this.stateRequestHashToResponseMap={};this.subjectToJqXHRMap={}}b.prototype.expectedFormSections=function(){return"items totalizers clientProfileData shippingData paymentData sellers messages marketingData clientPreferencesData storePreferencesData giftRegistryData".split(" ")};b.prototype.getOrderForm=function(a){null==a&&(a=this.expectedFormSections());a={expectedOrderFormSections:a};return $.ajaxQueue({url:this._getOrderFormURL(),
type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(a)})};b.prototype.sendAttachment=function(a,b,c,d){var f,g,e=this;null==c&&(c=this.expectedFormSections());null==d&&(d={});c={expectedOrderFormSections:c};if(void 0===a||void 0===b)return d=$.Deferred(),d.reject("Invalid arguments"),d.promise();_.extend(c,JSON.parse(b));if(d.cache&&d.currentStateHash&&(b=_.hash(a+JSON.stringify(c)),f=d.currentStateHash.toString()+":"+b.toString(),this.stateRequestHashToResponseMap[f]))return d=
$.Deferred(),d.resolve(this.stateRequestHashToResponseMap[f]),d.promise();a=$.ajaxQueue({url:this._getSaveAttachmentURL(a),type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(c)});d.abort&&d.subject&&(null!=(g=this.subjectToJqXHRMap[d.subject])&&g.abort(),this.subjectToJqXHRMap[d.subject]=a);d.cache&&d.currentStateHash&&a.done(function(a){return e.stateRequestHashToResponseMap[f]=a});return a};b.prototype.sendLocale=function(a){null==a&&(a="pt-BR");a=JSON.stringify({locale:a});
return this.sendAttachment("clientPreferencesData",a,[])};b.prototype.addOfferingWithInfo=function(a,b,c,d){a={id:a,info:b,expectedOrderFormSections:null!=d?d:this.expectedFormSections()};return $.ajaxQueue({url:this._getAddOfferingsURL(c),type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(a)})};b.prototype.addOffering=function(a,b,c){return this.addOfferingWithInfo(a,null,b,c)};b.prototype.removeOffering=function(a,b,c){c={Id:a,expectedOrderFormSections:null!=
c?c:this.expectedFormSections()};return $.ajaxQueue({url:this._getRemoveOfferingsURL(b,a),type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(c)})};b.prototype.updateItems=function(a,b){var c,d=this;null==b&&(b=this.expectedFormSections());c={orderItems:a,expectedOrderFormSections:b};void 0!==this.requestingItem&&(this.requestingItem.abort(),console.log("Abortando",this.requestingItem));return this.requestingItem=$.ajaxQueue({url:this._getUpdateItemURL(),
type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(c)}).done(function(){return d.requestingItem=void 0})};b.prototype.removeItems=function(a){var b,c=this;b=$.Deferred();(a?$.when(a):this.getOrderForm(["items"]).then(function(a){return a.items})).then(function(a){return c.updateItems(_(a).map(function(a,b){return{index:a.index,quantity:0}}).reverse()).done(function(a){return b.resolve(a)}).fail(b.reject)});return b.promise()};b.prototype.addDiscountCoupon=
function(a,b){var c;c={text:a,expectedOrderFormSections:null!=b?b:this.expectedFormSections()};return $.ajaxQueue({url:this._getAddCouponURL(),type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(c)})};b.prototype.removeDiscountCoupon=function(a){return this.addDiscountCoupon("",a)};b.prototype.removeGiftRegistry=function(a){null==a&&(a=this.expectedFormSections());a={expectedOrderFormSections:a};return $.ajax({url:"/api/checkout/pub/orderForm/giftRegistry/"+
this._getOrderFormId()+"/remove",type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(a)})};b.prototype.calculateShipping=function(a){return this.sendAttachment("shippingData",JSON.stringify({address:a}))};b.prototype.getAddressInformation=function(a){return $.ajax({url:this._getPostalCodeURL(a.postalCode,a.country),type:"GET",timeout:2E4})};b.prototype.getProfileByEmail=function(a,b){return $.ajax({url:this._getProfileURL(),type:"GET",data:{email:a,sc:b}})};
b.prototype.startTransaction=function(a,b,c,d,f,e){null==d&&(d=!1);null==f&&(f=!1);null==e&&(e=this.expectedFormSections());a={referenceId:this._getOrderFormId(),savePersonalData:d,optinNewsLetter:f,value:a,referenceValue:b,interestValue:c,expectedOrderFormSections:e};return $.ajaxQueue({url:this._startTransactionURL(),type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(a)})};b.prototype.getOrders=function(a){return $.ajaxQueue({url:this._getOrdersURL(a),
type:"GET",contentType:"application/json; charset=utf-8",dataType:"json"})};b.prototype.clearMessages=function(){return $.ajaxQueue({url:this._getOrderFormURL()+"/messages/clear",type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({expectedOrderFormSections:[]})})};b.prototype.removeAccountId=function(a){return $.ajaxQueue({url:this._getOrderFormURL()+"/paymentAccount/"+a+"/remove",type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",
data:JSON.stringify({expectedOrderFormSections:[]})})};b.prototype.getChangeToAnonymousUserURL=function(){return this.HOST_URL+"/checkout/changeToAnonymousUser/"+this._getOrderFormId()};b.prototype._getOrderFormId=function(){return this._getOrderFormIdFromCookie()||this._getOrderFormIdFromURL()||""};b.prototype._getOrderFormIdFromCookie=function(){var a;a=_.readCookie(this.COOKIE_NAME);if(void 0!==a&&""!==a)return _.getCookieValue(a,this.COOKIE_ORDER_FORM_ID_KEY)};b.prototype._getOrderFormIdFromURL=
function(){return $.url().param("orderFormId")};b.prototype._getOrderFormURL=function(){return this.HOST_ORDER_FORM_URL+this._getOrderFormId()};b.prototype._getSaveAttachmentURL=function(a){return this._getOrderFormURL()+"/attachments/"+a};b.prototype._getAddOfferingsURL=function(a){return this._getOrderFormURL()+"/items/"+a+"/offerings"};b.prototype._getRemoveOfferingsURL=function(a,b){return this._getOrderFormURL()+"/items/"+a+"/offerings/"+b+"/remove"};b.prototype._getAddCouponURL=function(){return this._getOrderFormURL()+
"/coupons"};b.prototype._getOrdersURL=function(a){return this.HOST_URL+"/api/checkout/pub/orders/order-group/"+a};b.prototype._startTransactionURL=function(){return this._getOrderFormURL()+"/transaction"};b.prototype._getUpdateItemURL=function(){return this._getOrderFormURL()+"/items/update/"};b.prototype._getPostalCodeURL=function(a,b){null==a&&(a="");null==b&&(b="BRA");return this.POSTALCODE_URL+b+"/"+a};b.prototype._getProfileURL=function(){return this.HOST_URL+"/api/checkout/pub/profiles/"};return b}();
window.vtex.checkout.API=e;window.vtex.checkout.API.version="VERSION";window.vtex.checkout.SDK=e;window.vtex.checkout.SDK.version="VERSION"}).call(this);